PHPの基本構文について見ていきましょう。

## 文字列
### 文字の連結と出力
文字列と他の文字列を連結し、新しい文字列を作成する処理はよく行われます。PHPで文字列を連結するには「.」を使用します。  
そして今までの説明の中にも出てきましたが、文字列を出力するには「echo」文を使います。

```php
'Hello,' . ' world!'
```

#### ▼ 練習問題１
php_basic.phpファイルに、echo文を使って連結した文字列を表示してみましょう。

```php
<?php
  echo 'Hello,' . ' world!';
?>
```

## 四則演算
PHPには、数値に対して計算を行ったり連結を行ったりする演算子が用意されています。
四則演算に関する演算子は以下の通りです。

|演算子|内容|例|
|:--:|:--:|:--:|
|`*`|乗算|5 * 3|
|`/`|除算|8 / 2|
|`+`|加算|3 + 6|
|`-`|減算|5 - 2|
|`%`|剰余|7 % 3|

#### ▼ 練習問題2
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  echo 5 * 3 . '<br>';
  echo 8 / 2 . '<br>';
  echo 3 + 6 . '<br>';
  echo 5 - 2 . '<br>';
  echo 7 % 3 . '<br>';
?>
```


## 変数
PHPでは、変数は値を格納するための箱になります。値そのものを変数に格納するという使い方をします。  
変数を利用するには、変数の名前と変数に格納する値を使って「$変数名 = 値;」という書き方をします。  
変数名に利用できる文字列は、先頭が「`_`」かアルファベットで始まり、その後に「`_`」、数字、アルファベットが続くものになります。
また、変数名では大文字と小文字は区別されるので注意してください。

#### ▼ 練習問題3
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = '変数の値を出力します';
  echo $var;
?>
```
### 代入演算子
変数に値を格納するには、代入演算子「=」を使います。代入演算子は、右辺の値を左辺に代入します。  
数値や文字列などの値が変数に格納されると、変数はあたかもその値のように扱うことができます。  
例えばecho文を使って出力することもできますし、数値が格納された変数を他の数値と演算することもできます。また、一度代入された変数に、別の値を代入することもできます。
さらに、他の変数を代入することもできます。

文字列の連結に関する演算子「.=」というものもあります。使い方は次のとおりです。

```php
<?php
$var = 'Hello,';
$var .= ' world!';
?>
```

これは、次のように記述した場合と同じになります。

```php
<?php
$var = 'Hello,';
$var = $var . ' world!';
?>
```

#### ▼ 練習問題4
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 'この文字列と';
  $var .= 'この文字列を';
  $var .= '繋げます';
  echo $var;
?>
```

### 変数の型
数値や文字列など、値には型が存在しますが、PHPの変数はどの型の値でも同じように格納することができます。
また、ある値が格納された変数に対して、別のデータ型の値を再度格納することもできます。  
変数に型が存在しないわけではなく、格納された値の型に自動的に変換されます。

#### ▼ 練習問題5
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 5;
  echo $var . '<br>';
  $var = '文字に上書き';
  echo $var;
?>
```

### 変数展開
文字列をダブルクオーテーションで囲んで定義した場合、文字列の中に変数を記述すると、変数に格納されている値で文字列の中の変数を置き換えることができます。

#### ▼ 練習問題6
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $colorName = 'red';
  echo "frame is ${colorName} color";
?>
```


## 制御文
### 条件分岐
#### if文
プログラムは記述した順に上から下へ実行されていきますが、条件によって処理を分けたい場合もあります。
例えば、変数の値が10より大きかったらAの処理を行い、10より小さかったらBの処理を行うといった場合です。

このように条件に従って処理を分岐させるための使われるのが「if」文です。「if」文の書式は次のようになっています。

```
if (条件式) {
	条件式が真の時に、ここの処理が実行される
}
```

条件式の箇所には「x > 10」や「y == 15」など比較演算子を使った条件式を記述します。
この条件が真(TRUE)となる時に、「{」から「}」までの文が実行されます。
なお、「{」から「}」で囲まれた部分を **ブロック** と呼びます。

if文の場合には、条件式が真の時にブロック内に記述された文を実行されます。ブロックはプログラムの中である範囲を区分するために使われます。

#### 論理値
if文では、条件式の結果が真か偽かで処理する内容を振り分けています。  
条件式には例えば「x > 10」のように、比較演算子を使った条件を記述しますが、条件が正しい場合には「x > 10」という式そのものが真(TRUE)という値を持ち、条件が正しくない場合には「x > 10」という式そのものが偽(FALSE)という値を持ちます。

このように、比較演算子は評価した結果として真(TRUE)か偽(FALSE)のいずれかの値を返します。  
この「TRUE」と「FALSE」2つの値のことを **論理値** といいます。

#### ▼ 練習問題8
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 11;
  if ($var > 10) {
    echo '10より大きい数値です';
  }
?>
```

#### 比較演算子
if文の時には、条件式の内容が真か偽かによって処理を分けます。  
条件式には「xxxと等しい」とか「xxxよりも大きい」などのように条件を記述することになりますが、この条件式の中で使用されるのが比較演算子です。

PHPでよく使われる比較演算子は次のとおりです。

|演算子|記述例|意味|
|:--:|:--:|:--|
|==|a==b|aとbの値が等しい|
|===|a===b|aとbの値が等しく、型も等しい|
|!=|a!=b|aとbの値が等しくない|
|!==|a!==b|aとbの値、もしくは型が等しくない|
|>|a>b|bよりaが大きい|
|>=|a>=b|bよりaが大きい、もしくは等しい|
|<|a<b|bよりaが小さい|
|<=|a<=b|bよりaが小さい、もしくは等しい|

比較演算子は、左辺と右辺に指定した数値や文字列を比較し、等しいか等しくないか、大きいか小さいかなどを比較します。
そして真となった場合にはTRUE、偽となった場合にはFALSEを返します。

#### 論理演算子
比較演算子では単独の条件式を記述することができますが、もう少し複雑に「xxxかつyyy」や「xxxもしくはyyy」のように、条件式を組み合わせてより複雑な条件式を利用したい場合があります。
このような場合に使用するのが論理演算子です。

PHPでよく使われる論理演算子は次のとおりです。

|演算子|記述例|意味|
|:--:|:--:|:--|
|&&|a && b|aかつbである（論理積）|
||||a || b|aまたはbである（論理和）|

論理積(AND)は、演算子「&&」の左辺と右辺の条件式が共にTRUEの場合のみ、全体の式の評価がTRUEとなります。  
論理和(OR)は、演算子「||」の左辺と右辺の少なくともどちらか一つの条件式がTRUEの場合に、全体の式の評価がTRUEとなります。

#### ▼ 練習問題9
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 23;
  if ($var >= 20 && $var < 30) {
    echo '20代です';
  }
?>
```

#### else
if文では、条件式が真(TRUE)の時に実行する処理の他に、条件式が偽(FALSE)の時に実行する処理も記述することが可能です。次の書式を使用します。

```
if (条件式) {
	条件式が真の時に、ここの処理が実行される
} else {
	条件式が偽の時に、ここの処理が実行される
}
```

#### ▼ 練習問題10
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 32;
  if ($var >= 20 && $var < 30) {
    echo '20代です';
  } else {
    echo '20代ではありません';
  }
?>
```

#### elseif
ここまでは1つの条件式で真か偽かを判別していましたが、複数の条件式を組み合わせることも可能です。
次の書式を使用します。

```
if (条件式A) {
	条件式Aが真の時に、ここの処理が実行される
} elseif (条件式B) {
	条件式Aは偽であるが、条件式Bが真の時に、ここの処理が実行される
} else {
	全ての条件式が偽の時に、ここの処理が実行される
}
```

この構文では、まず条件式1が評価されます。条件式1が真だった場合には、すぐ下のブロック内の処理を実行して終了です。もし条件式1が偽だった場合には、条件式2を評価します。そして条件式2が真だった場合にはその下にあるブロック内の処理を行い、偽だった場合には次の条件式の評価を行います。  
最終的に、全ての条件式が偽だった場合には、elseの後に書かれたブロック内の処理を行います。

「elseif」は、任意の数だけ記述することができます。注意点としては、上の条件式から順に評価が行われ、条件式が真だった場合はその下の条件式の評価は行われないことです。

#### ▼ 練習問題11
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 19;
  if ($var >= 20 && $var < 30) {
    echo '20代です';
  } elseif($var >= 30 && $var < 40) {
    echo '30代です';
  } else {
    echo '20代または30代ではありません';
  }
?>
```

#### switch文
変数の値が、Aならこの処理、Bならこの処理、Cならこの処理、など色々な値と順次比較して一致する場合毎に処理を記述する場合があります。if文を使うと次のように記述できます。

```php
<?php
$var = 'A';

if ($var == 'A') {
	// 処理
} elseif ($var == 'B') {
	// 処理
} elseif ($var == 'C') {
	// 処理
} elseif ($var == 'D') {
	// 処理
} elseif ($var == 'E') {
	// 処理
} else {
	// 処理
}
?>
```

これはこれで間違いではないのですが、このような用途の場合にはswitch文を使うと便利です。
switch文の書式は次の通りです。

```
switch (式) {
	case 値1:
		式が値1と等しい場合の処理;
		break;
	case 値2:
		式が値2と等しい場合の処理;
		break;
	case 値3:
		式が値3と等しい場合の処理;
		break;
	default:
		式がいずれの値とも等しくない場合の処理;
		break;
}
```

switch文では式の値を評価し、caseの後に記述された値と順次比較していきます。  
もし一致する値があった場合には、その後に記述された処理を順次処理していき、breakに達したら終了します。
if文の場合にはブロックを使ってどこからどこまでの処理を実行するのかが分かるようになっていましたが、switch文ではcase毎にブロックは使用されず、breakに達するまで順次処理を実行していきます。  
defaultの後の処理は、式がcaseの後に記述されたいずれの値にも一致しなかった時に実行される処理を記述します。

先程のif文をswitch文に書き直すと次のようになります。

```php
<?php
$var = 'A';

switch ($var) {
	case 'A':
		// 処理
		break;
	case 'B':
		// 処理
		break;
	case 'C':
		// 処理
		break;
	case 'D':
		// 処理
		break;
	case 'E':
		// 処理
		break;
	default:
		// 処理
		break;
}
?>
```

switch文は、実行される処理をブロックでまとめているのではなく、breakが見つかるまで順に処理を実行していくという特性があるため、breakを書き忘れるとその下のcase文の処理も実行してしまうので注意してください。

#### ▼ 練習問題12
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 'male';

  switch ($var) {
    case 'male':
      // 処理
      echo '男性です';
      break;
    case 'female':
      // 処理
      echo '女性です';
      break;
    default:
      // 処理
      echo '？';
      break;
  }
?>
```


### 繰り返し
#### while文
繰り返し処理を行う方法として、while文があります。書式は次のようになります。

```
while (条件式) {
	実行する処理;
}
```

条件式はif文と同じく比較演算子などを使って「x == 10」や「y > 15」などを記述します。
そして条件式が真(TRUE)だった場合、ブロック内に記述された処理を実行します。  
while文は繰り返し回数が決まっていない場合に有効な構文のため、 **無限ループ** とならないように十分気をつける必要があります。
また、繰り返し処理の中で、breakが実行されると繰り返し処理を終了させることができます。

#### ▼ 練習問題13
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $var = 0;
  while ($var < 10) {
    echo $var . '<br>';
    $var++;
  }
?>
```

##### 算術演算子
変数の算術演算子で、変数に対して値を+1したり-1したりすることができる演算子もあります。  
「$a++」（$aを返した後に、$aの値に1を足す）「$a--」（$aを返した後に、$aの値に1を引く）というような書き方をします。

#### for文
繰り返し処理では、条件式を評価して繰り返しを継続するかどうか判別します。
条件式には色々な条件を記述することができますが、決められた回数だけ繰り返すといった処理は多く使われます。  
変数の値を変化させていき、条件式で評価する場合にはfor文を使うとより簡潔に記述することができます。

for文の書式は次のようになります。

```
for (初期化式; 条件式; 変化式) {
	実行する処理;
}
```

* **初期化式** は、for文の処理が開始される時に一度だけ実行され、通常は条件式の中で使用される変数などの初期化を行う式を記述します。
* **条件式** は、while文などと同じく繰り返しを継続するかどうかの判定に用います。条件式の評価が真(TRUE)であればブロック内の処理を実行します。偽(FALSE)ならばfor文を終了します。
* **変化式** は、通常は条件式の中で使用される変数などを、繰り返しが1回行われるたびに変化させるための式を記述します。

#### ▼ 練習問題14
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  for ($i = 0; $i < 10; $i++) {
    echo $i . '<br>';
  }
?>
```

#### foreach文
foreach文は配列に含まれる各要素の値を順に取り出し処理したい場合に便利な文です。※配列については後述

書式は次のようになります。

```
foreach (配列変数 as 変数) {
	実行する処理;
}
```

要素を取り出す配列と、取り出した要素の値を格納する変数を指定します。  
foreach文による繰り返しでは、配列に含まれる要素の数だけ繰り返しが行われ、1回繰り返しが行われるたびに配列に含まれる要素の値を変数に代入します。

while文やfor文などと異なり、繰り返しが終了される条件式は存在しません。
配列の要素の数だけ繰り返して終了となります。

#### ▼ 練習問題15
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $fruits = array('りんご', 'みかん', 'ばなな');
  foreach ($fruits as $fruit) {
    echo $fruit . '<br>';
  }
?>
```

##### キーと値を取り出す
foreach文では、要素の値の他にキーを取り出す構文も用意されています。書式は次のようになります。

```
foreach (配列変数 as キー変数 => 値変数) {
	実行する処理;
}
```

この構文では、繰り返しが1回行われる毎に配列に含まれる要素の値を値変数に代入すると同時に、キーの値をキー変数に代入します。  
※キーを持つ配列（連想配列）については後述します。

#### ▼ 練習問題16
php_basic.phpファイルに、次の処理を記述してみましょう。

```php
<?php
  $fruits = array('apple'=>'りんご', 'orange'=>'みかん', 'banana'=>'ばなな');
  foreach ($fruits as $key => $value) {
    echo $key . ' = ' . $value . '<br>';
  }
?>
```

## 配列
配列は、数値や文字列などと同じくデータ型の1つであり、キーと値のペアからなる要素を複数管理することができます。  
配列は変数とは違い、同じような項目の値を複数管理する場合に有効です。

<img src="http://hackers.nexseed.net/images/curriculum_images/php_basic_1.png" alt="配列イメージ" style="width: 80%;">

* 値を一つだけでなく、複数保持することができる型
* 変数が積み重なったタンスのようなもの
* タンス自体を配列といい、わかりやすい変数名を付けて管理する
* データは上から順に何個でも格納できる
* 配列のそれぞれの段には上から0,1,2,3...とIndexという番号がふられている

```php
<?php
$var = array(‘xxx’, ‘yyy’, ‘zzz’, ...);
?>
```

### 連想配列
同じく配列で、キーを持つ配列のことを連想配列と呼びます。

<img src="http://hackers.nexseed.net/images/curriculum_images/php_basic_2.png" alt="配列イメージ" style="width: 80%;">


* 連想配列とは、構造は配列と同じく、値を複数保持することができる型
* 値を取得する時に、Index番号ではなくキー(key)を指定してデータを取得する
* “キー” => “値” の組み合わせで、普通の配列と違いキーの名前から値を連想できるので連想配列と呼ばれる

```php
<?php
$var = array(‘key1’ => ‘value1’, ‘key2’ => ‘value2’, ‘key3’ => ‘value3’, ...);
?>
```

## トピック
#### それぞれの型のtrueとfalseの定義について
プログラミングには「true」「false」という概念があります。そして、この「false」にはいくつか種類があります。

「false」はよく条件として使用されますが、そのほか似たような意味として比較されるものに「0」「null」「 」（空文字）があります。  
それぞれ型は違うものの、これらは真偽値の「偽」や「何もない」を意味する値として使われますが、ではそれらがどのように評価されるのかを比較してみましょう。  

##### 比較結果($a == $b)
まずはイコール2つの比較演算子で比較してみます。

||null|false|''|0|
|:--:|:--:|:--:|:--:|:--:|
|**null**|true|true|true|true|
|**false**|true|true|true|true|
|**''**|true|true|true|true|
|**0**|true|true|true|true|

結果は見ての通り、すべてtrue。一致するということです。

##### 比較結果($a === $b)
続いて、イコール3つの比較演算子で比較してみます。

||null|false|''|0|
|:--:|:--:|:--:|:--:|:--:|
|**null**|true|false|false|false|
|**false**|false|true|false|false|
|**''**|false|false|true|false|
|**0**|false|false|false|true|

結果としては、それぞれをちゃんと区別する形となりました。
このふたつの演算子の差は **比較する前に型変換を行うかどうか** となります。

このイコールを3つ使った比較では、比較する際にまず型が同じかどうかを見ます。
比較対象の型が異なる場合、その時点で比較結果をfalseとします。


## 演習問題
XAMPPのhtdocsフォルダに「php_practice.php」というファイルを作成し、演習問題を解いてみましょう。

* 実行するには、XAMPPを起動させておく必要があります。
* PHPファイルをブラウザで開くには、<a href="http://localhost/php_practice.php">こちら</a>からアクセスしてください。

### 問題１
変数$i = 100; を用意し、100から1まで1つずつカウントダウンするプログラムを作成してください。
（1つずつ改行して表示して下さい）

<details><summary>回答例</summary><div>
		
```
<?php
    for ($i = 100; $i >= 1; $i--) {
        echo $i . '<br>';
    }
?>

```
</div></details>
	
<br>

### 問題２
正の整数1から9に、それぞれ3を掛けた数を半角スペース区切りで出力して下さい。

<details><summary>回答例</summary><div>
		
```
<?php
    for ($i = 1; $i <= 9; $i++) {
      echo $i * 3 . ' ';
    }
?>

```
</div></details>
	
<br>

### 問題３
1から100までの数をプリントするプログラムを書きなさい。
ただし3の倍数のときは数の代わりに｢Fizz｣と、5の倍数のときは｢Buzz｣とプリントし、3と5両方の倍数の場合には｢FizzBuzz｣とプリントすること。

<details><summary>回答例</summary><div>
		
```
<?php
    for($i = 1; $i <=100; $i++){
        if($i % 15 === 0){
            echo "FizzBuzz" . '<br>';
        } elseif ($i % 5 === 0){
            echo "Buzz" . '<br>';
        } elseif ($i % 3 === 0){
            echo "Fizz" . '<br>';
        } else {
            echo $i . '<br>';
        }
    }
?>

```
</div></details>
	
<br>

### 問題４
1〜100までの数字を表示させるプログラムを作りましょう。
※出力のレイアウトは下記のように表示すること（数字を10個表示したタイミングで改行する）

```
1 2 3 4 5 6 7 8 9 10
11 12 13 14 15 16 17 18 19 20
...
...
91 92 93 94 95 96 97 98 99 100
```

<details><summary>回答例</summary><div>
		
```
<?php
    for ($i = 1; $i <= 100; $i++) {
      if ($i % 10 == 0 ){
          echo $i . '<br>';
      } else {
          echo $i . ' ';
      }
    }  
?>

```
</div></details>
	
<br>

### 問題５
下記のような配列変数「alpha」があります。この配列のうち、'A'という文字が何回登場してくるか計算して結果を出力してください。

```
<?php
  $alpha = array('E', 'A', 'D', 'B', 'A', 'C', 'A', 'B', 'E', 'E', 'A', 'A', 'C');
?>
```

<details><summary>回答例</summary><div>
		
```
<?php
    $alpha = array('E', 'A', 'D', 'B', 'A', 'C', 'A', 'B', 'E', 'E', 'A', 'A', 'C');
    $counts = array_count_values($alpha);
    echo $counts['A']
?>

```
</div></details>
	
<br>
